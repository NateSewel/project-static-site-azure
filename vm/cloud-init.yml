#cloud-config
package_update: true
package_upgrade: true
packages:
  - nginx
  - git

runcmd:
  - mkdir -p /var/www/html
  - rm -rf /var/www/html/*

  # Clone the repo directly (avoid raw.githubusercontent issues)
  - |
    echo "Cloning website repository..."
    git clone --depth 1 -b main https://github.com/NateSewel/project-static-site-azure.git /var/www/html || true
    rm -rf /var/www/html/.git

  - chown -R www-data:www-data /var/www/html
  - systemctl enable nginx
  - systemctl restart nginx
  - echo "âœ… Cloud-init completed successfully"
